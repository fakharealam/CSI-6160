MODULE sender ( ack )
VAR st : { sending , sent };
message : boolean ; control : boolean ;
ASSIGN
init ( st ) := sending ;
next ( st ) := case
ack = control & !( st = sent ) : sent ;
TRUE : sending ;
esac ;
next ( message ) := case
st = sent : { FALSE , TRUE };
TRUE : message ;
esac ;
next ( control ) := case
st = sent : ! control ;
TRUE : control ;
esac ;
FAIRNESS running
LTLSPEC G F ( st = sent )
